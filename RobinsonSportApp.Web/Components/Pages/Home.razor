@page "/"
@using RobinsonSportApp.Core.Managers.Events
@using RobinsonSportApp.Core.Managers.Events.Models
@using RobinsonSportApp.Core.Models
@inject IEventManager eventManager

<PageTitle>Plessis Sports</PageTitle>

<div class="main-home">
    @if (Events is null)
    {
        <div class="spinner"></div>
    }
    else
    {
        <div class="container-calendar">
            <div class="module-calendar display-mode-desktop">
                <div class="row align-items-center">
                    <p class="summary">Upcoming Matches</p>

                    @foreach (var match in Events)
                    {

                        <div class="row align-items-center">
                            <div class="custom-col-lg-4">

                                <div class="match-type" style="font-style: italic">@match.SportCategory</div>
                                <a href="match/@(match.Id)" style="color: white; text-decoration: none;">
                                    <div class="row align-items-center">

                                        <div class="col">
                                            <p class="starting-date " style="white-space: nowrap;">
                                                Starting Date
                                                <br />
                                                <i class="bi bi-calendar"></i>
                                                @match.StartTime.ToString("dd.MM.yyyy HH:mm")

                                            </p>
                                        </div>

                                        <div class="col">
                                            <p class="starting-date">@match.Opponent1</p>
                                        </div>

                                        <div class="col">
                                            <p class="starting-date">
                                                vs
                                            </p>
                                        </div>
                                        <div class="col">
                                            <p class="starting-date">@match.Opponent2</p>
                                        </div>
                                        <div class="col">
                                            <p class="starting-date" style="white-space: nowrap;">
                                                @match.Place
                                                <br />
                                                <i class="bi bi-geo-alt starting-date">@match.Place</i>
                                            </p>
                                        </div>


                                    </div>
                                </a>

                            </div>
                        </div>
                    }
                </div>
            </div>
            <div class="module-calendar display-mode-mobile">
                <div class="row align-items-center">
                    <p class="summary">Upcoming Matches</p>
                    <br />

                    @{
                        var upcomingMatches = Events.Take(2).ToList();
                        var lastMatchIndex = upcomingMatches.Count - 1;
                        int counter = 0;
                    }

                    @foreach (var match in Events.Take(2))
                    {
                        <div class="row align-items-center">
                            <div class="custom-col-lg-4">
                                <div class="match-type" style="font-style: italic">@match.SportCategory</div>
                                <p class="starting-date " style="white-space: nowrap;">

                                    Starting Date
                                    <br />
                                    <i class="bi bi-calendar"></i>
                                    @match.StartTime.ToString("dd.MM.yyyy HH:mm")

                                </p>
                                <div class="row align-items-center">


                                    <div class="col">
                                        <p class="starting-date">@match.Opponent1</p>
                                    </div>
                                    <div class="col">
                                        <p class="starting-date">
                                            vs
                                        </p>
                                    </div>
                                    <div class="col">
                                        <p class="starting-date">@match.Opponent2</p>
                                    </div>

                                    <p class="starting-date" style="@(counter != lastMatchIndex ? "white-space: nowrap; border-bottom: 1px solid #fff; padding-bottom: 20px;" : "white-space: nowrap;")">
                                        @match.Place
                                        <br />
                                        <i class="bi bi-geo-alt starting-date">@match.Place</i>
                                    </p>

                                </div>
                            </div>
                        </div>
                        counter++;
                    }
                </div>
            </div>
        </div>
    }
</div>
<div class="results-home">
    <div class="club-ranking">
        <h2>Club Ranking</h2>
        <ul>
            <li>
                <span class="position">01</span>
                <a href="#"><img src="https://html.iwthemes.com/allEvents/Sport/img/clubs-logos/rusia.png" alt="">Russia</a>
                <span class="points">90</span>
            </li>
            <li>
                <span class="position">01</span>
                <a href="#"><img src="https://html.iwthemes.com/allEvents/Sport/img/clubs-logos/arabia.png" alt="">Saudi Arabia</a>
                <span class="points">90</span>
            </li>
            <li>
                <span class="position">01</span>
                <a href="#"><img src="https://html.iwthemes.com/allEvents/Sport/img/clubs-logos/egypt.png" alt="">Egypt</a>
                <span class="points">90</span>
            </li>
            <li>
                <span class="position">01</span>
                <a href="#"><img src="https://html.iwthemes.com/allEvents/Sport/img/clubs-logos/spain.png" alt="">Spain</a>
                <span class="points">90</span>
            </li>
            <li>
                <span class="position">01</span>
                <a href="#"><img src="https://html.iwthemes.com/allEvents/Sport/img/clubs-logos/portugal.png" alt="">Spain</a>
                <span class="points">90</span>
            </li>
            <li>
                <span class="position">01</span>
                <a href="#"><img src="https://html.iwthemes.com/allEvents/Sport/img/clubs-logos/spain.png" alt="">Spain</a>
                <span class="points">90</span>
            </li>
            <li>
                <span class="position">01</span>
                <a href="#"><img src="https://html.iwthemes.com/allEvents/Sport/img/clubs-logos/portugal.png" alt="">Spain</a>
                <span class="points">90</span>
            </li>
        </ul>
    </div>

    @if (RecentResults is null)
    {
        <div class="spinner"></div>
    }
    else
    {
        <div class="recent-results">
            <h2>Recent Results</h2>
            <ul>
                @foreach (var match in RecentResults)
                {
                    <li>
                        <div class="goals-result">
                            <a href="match/@match.Id">
                                <img src="@match.Opponent1Logo" alt="">@match.Opponent1
                            </a>
                            <span class="goals">
                                <b>@match.Score1</b> - <b>@match.Score2</b>
                            </span>
                            <a href="match/@match.Id">
                                <img src="@match.Opponent2Logo" alt="">@match.Opponent2
                            </a>
                            <span>@match.EndTime.ToString("dd.MM.yyyy HH:mm")</span>
                        </div>
                    </li>
                }
            </ul>
        </div>
    }

    <div class="top-player">
        <h2>Top players</h2>
        <ul>
            <li>
                <span class="position">01</span>
                <a href="#"><img src="https://html.iwthemes.com/allEvents/Sport/img/clubs-logos/rusia.png" alt="">Lionel Messi</a>
                <span class="points">90</span>
            </li>
            <li>
                <span class="position">01</span>
                <a href="#"><img src="https://html.iwthemes.com/allEvents/Sport/img/clubs-logos/arabia.png" alt="">Saudi Arabia</a>
                <span class="points">90</span>
            </li>
            <li>
                <span class="position">01</span>
                <a href="#"><img src="https://html.iwthemes.com/allEvents/Sport/img/clubs-logos/egypt.png" alt="">Egypt</a>
                <span class="points">90</span>
            </li>
            <li>
                <span class="position">01</span>
                <a href="#"><img src="https://html.iwthemes.com/allEvents/Sport/img/clubs-logos/spain.png" alt="">Spain</a>
                <span class="points">90</span>
            </li>
            <li>
                <span class="position">01</span>
                <a href="#"><img src="https://html.iwthemes.com/allEvents/Sport/img/clubs-logos/portugal.png" alt="">Spain</a>
                <span class="points">90</span>
            </li>
            <li>
                <span class="position">01</span>
                <a href="#"><img src="https://html.iwthemes.com/allEvents/Sport/img/clubs-logos/portugal.png" alt="">Spain</a>
                <span class="points">90</span>
            </li>
            <li>
                <span class="position">01</span>
                <a href="#"><img src="https://html.iwthemes.com/allEvents/Sport/img/clubs-logos/portugal.png" alt="">Spain</a>
                <span class="points">90</span>
            </li>
        </ul>
    </div>
</div>

@code {
    private List<EventModel> Events { get; set; }
    private List<EventModel> RecentResults { get; set; }

    protected override async Task OnInitializedAsync()
    {
        Events = await eventManager.GetUpcomingEventsAsync(4);
        RecentResults = await eventManager.GetRecentEventsAsync(10);
    }
}

